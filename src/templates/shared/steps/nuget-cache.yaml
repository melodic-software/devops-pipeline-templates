parameters:
  path: "$(Pipeline.Workspace)/.nuget/packages"
  cacheHitVar: "NuGetCacheRestored"

steps:
  # https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/caching-nuget?view=azure-devops
  # https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/cache-v2?view=azure-pipelines
  - task: Cache@2
    displayName: Cache NuGet
    inputs:
      key: 'nuget | "$(Agent.OS)" | **/packages.lock.json,!**/bin/**,!**/obj/**'
      restoreKeys: |
        nuget | "$(Agent.OS)"
        nuget
      path: ${{ parameters.path }}
      cacheHitVar: ${{ parameters.cacheHitVar }}
